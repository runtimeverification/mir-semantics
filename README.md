# MIR Semantics

In this repository, we provide a model of Rust MIR in K.

NOTE: This project is currently under reconstruction with changes and work outlined in [Polkadot Referendum #749](https://polkadot.subsquare.io/referenda/749). Some features you may be familiar with (concrete execution and symbolic execution) are currently removed while project foundations are improved.

Currently, the project is working to stabilize the serialized output of stable MIR (see our current [Rust PR](https://github.com/rust-lang/rust/pull/126963)) and develop the semantics for this output. 

If you would like to try a legacy version of the project, [this blog post](https://runtimeverification.com/blog/introducing-kmir) has a tutorial on how to get started. However, it is important to install a legacy version for this to work, so when the tutorial prompts to install the latest version of KMIR with `kup install kmir`, this should be replaced instead with `kup install kmir --version v0.2.21`


## For Developers

### Setup

Pre-requisites: `python >= 3.10`, `pip >= 20.0.2`, `poetry >= 1.3.2`.

```bash
make build
```

Use `make` to run common tasks (see the [Makefile](Makefile) for a complete list of available targets).

For interactive use, spawn a shell with `poetry -C kmir/ shell` (after `poetry -C kmir/ install`), then run an interpreter. Or directly run from `mir-semantics` root with `poetry run -C kmir kmir <COMMAND>`

## Usage

Use `--help` with each command for more details.

`parse` to parse a Stable MIR JSON file (`*.smir.json`) file to a K AST

`kmir run` to load an SMIR JSON generated by the `stable-mir-json` tool.

`kmir gen-spec` to take a SMIR JSON and create a K specification module that ensures termination of the program.

`kmir prove run` to run the prover on a spec generated by `gen-spec`.

`kmir prove view` to run the KCFG visualizer and inspect the proof steps.
